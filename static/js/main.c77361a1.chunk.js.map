{"version":3,"sources":["libs/components.ts","components/alerts/Alert.tsx","components/alerts/Error.tsx","images/loader.svg","components/icons/Loader.tsx","libs/hooks/general.tsx","components/headings/H1.tsx","components/form/Input.tsx","libs/utils.ts","components/buttons/Button.tsx","components/buttons/Primary.tsx","libs/clients/stake.ts","pages/Login.tsx","pages/Logout.tsx","components/headings/H2.tsx","components/headings/H3.tsx","components/headings/H4.tsx","components/links/Internal.tsx","pages/Journal.tsx","containers/App.tsx","libs/hooks/user.ts","index.tsx"],"names":["mergeClassNames","base","overrides","overrideKeys","split","reduce","carry","override","prefix","slice","join","push","filteredBaseclassNames","filter","className","some","overrideKey","startsWith","Alert","title","icon","closeButtonClassName","dismissable","onDismiss","message","role","type","onClick","style","width","height","ErrorAlert","otherProps","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","cx","cy","r","stroke","strokeWidth","_ref3","fill","d","SvgLoader","_ref","svgRef","titleId","props","xmlns","viewBox","ref","id","ForwardRef","LoaderIcon","useAsyncState","defaultLoading","useState","loading","setLoading","errorData","set","clear","error","has","useErrorAlert","setError","clearError","hasError","loadingText","textProps","Loader","default","H1","children","Input","forwardRef","nanoid","debounceOnChange","undefined","debounceTimeout","value","onChange","inputProps","internalValue","setInternalValue","debouncedUpdate","useMemo","func","delay","timeoutId","previousCall","args","delayedCallback","timeSinceLastCall","Date","now","window","setTimeout","newArgs","debounce","newValue","e","Button","PrimaryButton","apiUrl","uri","login","username","password","otp","a","data","platformType","rememberMeDays","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","response","ok","json","responseData","firstName","lastName","regionIdentifier","sessionKey","userID","status","Error","user","loadTrades","from","to","limit","offset","desc","direction","toISO","formSchema","Joi","object","email","string","required","tlds","LoginPage","history","useHistory","requiresOtp","setRequiresOtp","emailRef","useRef","useForm","criteriaMode","resolver","joiResolver","register","errors","handleSubmit","formState","useEffect","current","focus","onSubmit","localStorage","setItem","name","placeholder","Primary","disabled","LogoutPage","logout","removeItem","H2","H3","H4","InternalLink","CELL_WIDTH","sortTransactionsAsc","b","tranWhen","sortBuySell","date","sortLogEntries","aEarliestBuyDate","buys","bEarliestBuyDate","fillDataArrayWithBuys","transactions","newData","forEach","transaction","finTranTypeID","symbol","instrument","DateTime","fromISO","dataIndex","Math","floor","diff","as","dayLog","symbols","profitRaw","profitPercent","spent","earned","startOf","symbolEntry","sells","holdingUnitCount","buyIndex","findIndex","candidate","orderId","orderID","existingBuy","unitQuantity","fillQty","totalPrice","tranAmount","concat","unitPrice","fillPx","fillDataArrayWithSells","unmatchedTransactions","remainingQuantity","searchIndex","fillQuantity","calculateProfits","map","dayAmountSpent","dayAmountEarned","logEntry","quantitySold","sort","symbolAmountEarned","total","sell","symbolAmountSpent","buy","consumedAmount","abs","getDisplayProfit","raw","percent","isProfit","toPrecision","JournalPage","cachedData","getItem","initialised","setInitialised","parse","setData","showUnmatchedAlert","setShowUnmatchedAlert","unmatchedTransactionCount","setUnmatchedTransactionCount","monthLogs","newMonthLogs","dayDate","startOfMonth","startOfWeek","monthLog","find","equals","weekLogs","weekLog","weekNumber","endOfWeek","endOf","plus","week","weekOfMonth","dayLogs","reverse","startFetchingTrades","lastFetchDate","local","fetching","buyTransactions","sellTransactions","Internal","monthProfitRaw","isMonthProfit","displayRaw","displayPercent","hasMonthEarnings","toFormat","weekIndex","weekProfitRaw","isWeekProfit","hasWeekEarnings","dayProfitRaw","hasDayEarnings","symbolEntries","values","hasHoldings","hasSold","symbolProfitRaw","index","withRouter","location","useLocation","userJson","useCurrentUser","unauthenticatedRoutes","path","exact","component","authenticatedRoutes","Journal","Logout","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c77361a1.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const mergeClassNames = (base: string, overrides: string) => {\n  const overrideKeys = overrides\n    .split(\" \")\n    .reduce<string[]>((carry, override) => {\n      const prefix = override.split(\"-\").slice(0, -1).join(\"-\");\n\n      if (prefix !== \"\") {\n        carry.push(prefix);\n      }\n\n      return carry;\n    }, []);\n  const filteredBaseclassNames = base\n    .split(\" \")\n    .filter(\n      (className) =>\n        !overrideKeys.some((overrideKey) => className.startsWith(overrideKey))\n    )\n    .join(\" \");\n  return `${filteredBaseclassNames} ${overrides}`;\n};\n\nexport function mergeRefs<T = any>(\n  refs: Array<React.MutableRefObject<T> | React.LegacyRef<T>>\n): React.RefCallback<T> {\n  return (value) => {\n    refs.forEach((ref) => {\n      if (typeof ref === \"function\") {\n        ref(value);\n      } else if (ref !== null) {\n        (ref as React.MutableRefObject<T | null>).current = value;\n      }\n    });\n  };\n}\n","import React, { ReactNode } from \"react\";\nimport { X } from \"react-feather\";\nimport { mergeClassNames } from \"../../libs/components\";\n\ninterface AlertProps {\n  className?: string;\n  closeButtonClassName?: string;\n  title?: ReactNode;\n  icon?: ReactNode;\n  dismissable?: boolean;\n  onDismiss?: () => void;\n  message: ReactNode;\n}\n\nconst Alert: React.FC<AlertProps> = ({\n  title = null,\n  icon = null,\n  className = \"\",\n  closeButtonClassName = \"\",\n  dismissable = false,\n  onDismiss = null,\n  message,\n}) => {\n  return (\n    <div\n      className={mergeClassNames(\n        \"relative flex items-center rounded-lg py-2 px-4\",\n        className\n      )}\n      role=\"alert\"\n    >\n      {dismissable && onDismiss && (\n        <button\n          className={mergeClassNames(\n            \"absolute top-0 right-0 rounded-full p-1 m-1 transform ease-in-out duration-300\",\n            closeButtonClassName\n          )}\n          type=\"button\"\n          title=\"Close\"\n          onClick={() => onDismiss()}\n        >\n          {<X className=\"w-4 h-4\" />}\n        </button>\n      )}\n      {icon && (\n        <div\n          className=\"mr-4 flex-shrink-0\"\n          style={{ width: \"30px\", height: \"30px\" }}\n        >\n          {icon}\n        </div>\n      )}\n      <div>\n        {title && <h3 className=\"font-bold mb-1\">{title}</h3>}\n        <p>{message}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default Alert;\n","import React, { ComponentProps } from \"react\";\nimport { AlertCircle } from \"react-feather\";\nimport Alert from \"./Alert\";\nimport { mergeClassNames } from \"../../libs/components\";\n\ninterface ErrorAlertProps\n  extends Omit<ComponentProps<typeof Alert>, \"icon\" | \"closeButtonClassName\"> {}\n\nconst ErrorAlert: React.FC<ErrorAlertProps> = ({\n  className = \"\",\n  ...otherProps\n}) => {\n  return (\n    <Alert\n      className={mergeClassNames(\"bg-red-200 text-red-900\", className)}\n      closeButtonClassName=\"text-red-900 hover:bg-red-300 focus:bg-red-300\"\n      icon={<AlertCircle />}\n      {...otherProps}\n    />\n  );\n};\n\nexport default ErrorAlert;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"circle\", {\n  className: \"opacity-25\",\n  cx: 12,\n  cy: 12,\n  r: 10,\n  stroke: \"currentColor\",\n  strokeWidth: 4\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"opacity-75\",\n  fill: \"currentColor\",\n  d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n});\n\nfunction SvgLoader(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    height: 24,\n    width: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLoader);\nexport default __webpack_public_path__ + \"static/media/loader.d6f2f542.svg\";\nexport { ForwardRef as ReactComponent };","import React, { SVGProps } from \"react\";\nimport { mergeClassNames } from \"../../libs/components\";\nimport { ReactComponent as LoaderImage } from \"../../images/loader.svg\";\n\nconst LoaderIcon: React.FC<SVGProps<SVGSVGElement>> = ({\n  className = \"\",\n  ...otherProps\n}) => {\n  return (\n    <LoaderImage\n      className={mergeClassNames(\"animate-spin\", className)}\n      {...otherProps}\n    />\n  );\n};\n\nexport default LoaderIcon;\n","import React, {\n  useRef,\n  useContext,\n  useEffect,\n  useCallback,\n  useState,\n  useMemo,\n} from \"react\";\nimport ErrorAlert from \"../../components/alerts/Error\";\nimport LoaderIcon from \"../../components/icons/Loader\";\n\nexport const usePrevious = <T extends any>(value: T): T | null => {\n  const ref = useRef<T | null>(null);\n  const previousValue = ref.current;\n\n  if (value !== undefined && value !== previousValue) {\n    ref.current = value;\n  }\n\n  return previousValue;\n};\n\ninterface ErrorAlertProps {\n  className?: string;\n  dismissable?: boolean;\n}\nexport const useErrorAlert = () => {\n  const [errorData, set] = useState<{\n    title: string;\n    message: React.ReactNode;\n  } | null>(null);\n\n  const clear = () => set(null);\n\n  const error = (props?: ErrorAlertProps) => {\n    const { className = \"\", dismissable = true } = props || {};\n    return errorData ? (\n      <ErrorAlert\n        className={className}\n        title={errorData.title}\n        message={errorData.message}\n        dismissable={dismissable}\n        onDismiss={clear}\n      />\n    ) : null;\n  };\n\n  return {\n    error,\n    set,\n    clear,\n    has: () => errorData !== null,\n  };\n};\n\ninterface UseAsyncStateProps {\n  defaultLoading?: boolean;\n}\nexport const useAsyncState = (props?: UseAsyncStateProps) => {\n  const { defaultLoading = false } = props || {};\n  const [loading, setLoading] = useState(defaultLoading);\n  const {\n    error,\n    set: setError,\n    clear: clearError,\n    has: hasError,\n  } = useErrorAlert();\n\n  const loadingText = (textProps: { loading: string; default: string }) => {\n    return loading ? (\n      <div className=\"flex items-center\">\n        <LoaderIcon className=\"mr-2\" />\n        <span>{textProps.loading}</span>\n      </div>\n    ) : (\n      textProps.default\n    );\n  };\n\n  return {\n    loading,\n    loadingText,\n    setLoading,\n    error,\n    setError,\n    clearError,\n    hasError,\n  };\n};\n","import React, { HTMLProps } from \"react\";\nimport { mergeClassNames } from \"../../libs/components\";\n\nconst H1: React.FC<HTMLProps<HTMLHeadingElement>> = ({\n  className = \"\",\n  children,\n  ...otherProps\n}) => {\n  return (\n    <h1\n      className={mergeClassNames(\n        \"font-heading font-bold text-5xl text-black\",\n        className\n      )}\n      {...otherProps}\n    >\n      {children}\n    </h1>\n  );\n};\n\nexport default H1;\n","import React, { forwardRef, useMemo, useState } from \"react\";\nimport { nanoid } from \"nanoid\";\nimport { mergeClassNames } from \"../../libs/components\";\nimport { debounce } from \"../../libs/utils\";\n\ninterface InputProps\n  extends React.DetailedHTMLProps<\n    React.InputHTMLAttributes<HTMLInputElement>,\n    HTMLInputElement\n  > {\n  error?: boolean;\n  className?: string;\n  debounceOnChange?: (newValue: string) => void;\n  debounceTimeout?: number;\n}\n\nconst Input = forwardRef<HTMLInputElement, InputProps>(\n  (\n    {\n      className = \"\",\n      id = nanoid(),\n      error = false,\n      debounceOnChange = undefined,\n      debounceTimeout = 500,\n      value,\n      onChange,\n      ...inputProps\n    },\n    ref\n  ) => {\n    const [internalValue, setInternalValue] = useState(\n      value === undefined ? \"\" : value\n    );\n\n    const debouncedUpdate = useMemo(\n      () =>\n        debounce((newValue: string) => {\n          if (debounceOnChange) {\n            debounceOnChange(newValue);\n          }\n        }, debounceTimeout),\n      [debounceOnChange, debounceTimeout]\n    );\n\n    const internalOnChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      setInternalValue(e.target.value);\n      debouncedUpdate(e.target.value);\n    };\n\n    return (\n      <input\n        ref={ref}\n        id={id}\n        className={mergeClassNames(\n          `py-3 px-4 w-full rounded-lg default-transition border-2 focus:border-black ${\n            error ? \"border-red-500\" : \"border-gray-300\"\n          }`,\n          className\n        )}\n        value={debounceOnChange ? internalValue : value}\n        onChange={debounceOnChange ? internalOnChange : onChange}\n        {...inputProps}\n      />\n    );\n  }\n);\n\nexport default Input;\n","// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\nexport function escapeRegExp(value: string) {\n  return value.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\nexport function debounce<T extends (...args: any) => void>(\n  func: T,\n  delay: number\n): T {\n  let timeoutId: number | null = null;\n  let previousCall: number = 0;\n  let args: any = undefined;\n\n  const delayedCallback = () => {\n    const timeSinceLastCall = Date.now() - previousCall;\n\n    if (timeSinceLastCall > delay) {\n      func(...args);\n      timeoutId = null;\n      previousCall = 0;\n      args = undefined;\n    } else {\n      timeoutId = window.setTimeout(delayedCallback, delay - timeSinceLastCall);\n    }\n  };\n\n  return (((...newArgs: any) => {\n    if (timeoutId === null) {\n      timeoutId = window.setTimeout(delayedCallback, delay);\n    }\n\n    args = newArgs;\n    previousCall = Date.now();\n  }) as unknown) as T;\n}\n\nexport function clampImageHeight(\n  height: number,\n  width: number,\n  maxHeight: number\n) {\n  let newHeight = height;\n  let newWidth = width;\n\n  if (height > maxHeight) {\n    const ratio = maxHeight / height;\n    newHeight = height * ratio;\n    newWidth = width * ratio;\n  }\n\n  return [newHeight, newWidth] as [number, number];\n}\n\nexport function clampImageWidth(\n  height: number,\n  width: number,\n  maxWidth: number\n) {\n  let newHeight = height;\n  let newWidth = width;\n\n  if (width > maxWidth) {\n    const ratio = maxWidth / width;\n    newHeight = height * ratio;\n    newWidth = width * ratio;\n  }\n\n  return [newHeight, newWidth] as [number, number];\n}\n\nexport function clampImageSize(\n  height: number,\n  width: number,\n  maxHeight: number,\n  maxWidth: number\n) {\n  return clampImageWidth(\n    ...clampImageHeight(height, width, maxHeight),\n    maxWidth\n  );\n}\n","import React, { forwardRef } from \"react\";\nimport { mergeClassNames } from \"../../libs/components\";\n\nconst Button = forwardRef<\n  HTMLButtonElement,\n  React.DetailedHTMLProps<\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\n    HTMLButtonElement\n  >\n>(({ children, className = \"\", type = \"button\", ...props }, ref) => {\n  return (\n    <button\n      ref={ref}\n      type={type}\n      className={mergeClassNames(\n        \"py-3 px-4 flex items-center justify-center rounded-lg font-bold default-transition\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n});\n\nexport default Button;\n","import React, { ComponentProps, forwardRef } from \"react\";\nimport { mergeClassNames } from \"../../libs/components\";\nimport Button from \"./Button\";\n\nconst PrimaryButton = forwardRef<\n  HTMLButtonElement,\n  ComponentProps<typeof Button>\n>(({ className = \"\", ...props }, ref) => {\n  return (\n    <Button\n      ref={ref}\n      className={mergeClassNames(\n        \"bg-black text-white hover:ring-4 hover:ring-gray-200 focus:ring-4 focus:ring-gray-200\",\n        className\n      )}\n      {...props}\n    />\n  );\n});\n\nexport default PrimaryButton;\n","import { DateTime } from \"luxon\";\nimport { Transaction, User } from \"../../types\";\n\nconst API_URL = \"https://global-prd-api.hellostake.com/api\";\n\nfunction apiUrl(uri: string) {\n  return `${API_URL}/${uri}`;\n}\n\nexport async function login(username: string, password: string, otp?: string) {\n  const data: any = {\n    username,\n    password,\n    platformType: \"WEB_f5K2x3\",\n    rememberMeDays: 30,\n  };\n\n  if (otp) {\n    data.otp = otp;\n  }\n\n  const response = await fetch(apiUrl(\"sessions/v2/createSession\"), {\n    method: \"POST\",\n    mode: \"cors\",\n    cache: \"no-cache\",\n    credentials: \"same-origin\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n    referrerPolicy: \"no-referrer\",\n    body: JSON.stringify(data),\n  });\n\n  if (response.ok) {\n    const responseData = await response.json();\n    return {\n      firstName: responseData.firstName,\n      lastName: responseData.lastName,\n      regionIdentifier: responseData.regionIdentifier,\n      sessionKey: responseData.sessionKey,\n      userID: responseData.userID,\n      username: responseData.username,\n    } as User;\n  } else {\n    if (response.status === 412) {\n      return null;\n    } else {\n      const responseData = await response.json();\n      throw new Error(`Failed to login: ${responseData.message}`);\n    }\n  }\n}\n\nexport async function logout(user: User) {\n  await fetch(apiUrl(`userauth/${user.sessionKey}`), {\n    method: \"DELETE\",\n    mode: \"cors\",\n    cache: \"no-cache\",\n    credentials: \"same-origin\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    redirect: \"follow\",\n    referrerPolicy: \"no-referrer\",\n  });\n}\n\nexport async function loadTrades(\n  user: User,\n  from: DateTime,\n  to: DateTime,\n  limit: number,\n  offset: number,\n  desc: boolean\n) {\n  const response = await fetch(apiUrl(\"users/accounts/accountTransactions\"), {\n    method: \"POST\",\n    mode: \"cors\",\n    cache: \"no-cache\",\n    credentials: \"same-origin\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Stake-Session-Token\": user.sessionKey,\n    },\n    redirect: \"follow\",\n    referrerPolicy: \"no-referrer\",\n    body: JSON.stringify({\n      direction: desc ? \"prev\" : \"next\",\n      from: from.toISO(),\n      to: to.toISO(),\n      limit,\n      offset: offset || null,\n    }),\n  });\n\n  if (response.ok) {\n    const responseData = await response.json();\n    return responseData as Transaction[];\n  } else {\n    const responseData = await response.json();\n    throw new Error(`Failed to load transactions: ${responseData.message}`);\n  }\n}\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { joiResolver } from \"@hookform/resolvers/joi\";\nimport Joi from \"joi\";\nimport { useAsyncState } from \"../libs/hooks/general\";\n\nimport H1 from \"../components/headings/H1\";\nimport Input from \"../components/form/Input\";\nimport PrimaryButton from \"../components/buttons/Primary\";\nimport { login } from \"../libs/clients/stake\";\nimport { useHistory } from \"react-router-dom\";\n\ntype FormValues = {\n  email: string;\n  password: string;\n  otp?: string;\n};\n\nconst formSchema = Joi.object({\n  email: Joi.string().required().email({ tlds: false }),\n  password: Joi.string().required(),\n  otp: Joi.string(),\n});\n\nconst LoginPage: React.FC = () => {\n  const history = useHistory();\n  const [requiresOtp, setRequiresOtp] = useState(false);\n  const emailRef = useRef<HTMLInputElement | null>(null);\n  const { register, errors, formState, handleSubmit } = useForm<FormValues>({\n    criteriaMode: \"all\",\n    resolver: joiResolver(formSchema),\n  });\n  const {\n    loading,\n    loadingText,\n    setLoading,\n    error,\n    setError,\n    clearError,\n  } = useAsyncState();\n\n  useEffect(() => {\n    if (emailRef && emailRef.current) {\n      emailRef.current.focus();\n    }\n  }, []);\n\n  const onSubmit = async (data: FormValues) => {\n    if (requiresOtp && !data.otp) {\n      setError({\n        title: \"MFA Required\",\n        message: \"You need to supply the verifcation code\",\n      });\n      return;\n    }\n\n    clearError();\n    setLoading(true);\n\n    try {\n      const user = await login(\n        data.email,\n        data.password,\n        data.otp ? data.otp : undefined\n      );\n\n      if (user === null) {\n        setRequiresOtp(true);\n        setLoading(false);\n      } else {\n        window.localStorage.setItem(\"user\", JSON.stringify(user));\n        history.push(\"/\");\n      }\n    } catch (e) {\n      setError({\n        title: \"Login failed\",\n        message: e.message,\n      });\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center w-screen h-screen pt-20\">\n      <H1>Stake trading journal</H1>\n      {error({ className: \"mt-4\" })}\n      <form\n        className=\"mt-12\"\n        onSubmit={handleSubmit(onSubmit)}\n        style={{ width: 400 }}\n      >\n        <Input\n          ref={(ref) => {\n            register(ref);\n            emailRef.current = ref;\n          }}\n          name=\"email\"\n          type=\"text\"\n          error={!!errors.email}\n          placeholder=\"Email\"\n        />\n        <Input\n          ref={register}\n          className=\"mt-2\"\n          type=\"password\"\n          name=\"password\"\n          error={!!errors.password}\n          placeholder=\"Password\"\n        />\n        {requiresOtp && (\n          <Input\n            ref={register}\n            className=\"mt-2\"\n            name=\"otp\"\n            error={!!errors.password}\n            placeholder=\"Verification code\"\n          />\n        )}\n        <PrimaryButton\n          className=\"mt-6 w-full text-xl text-white\"\n          type=\"submit\"\n          disabled={loading}\n        >\n          {loadingText({\n            loading: \"Logging in...\",\n            default: \"Log in\",\n          })}\n        </PrimaryButton>\n      </form>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","import React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { logout } from \"../libs/clients/stake\";\nimport { User } from \"../types\";\n\ninterface LogoutPageProps {\n  user: User;\n}\nconst LogoutPage: React.FC<LogoutPageProps> = ({ user }) => {\n  const history = useHistory();\n\n  useEffect(() => {\n    logout(user);\n    window.localStorage.removeItem(\"user\");\n    window.localStorage.removeItem(\"journalData\");\n    window.localStorage.removeItem(\"journalLastFetchDate\");\n    history.push(\"/login\");\n  }, []);\n\n  return null;\n};\n\nexport default LogoutPage;\n","import React, { HTMLProps } from \"react\";\nimport { mergeClassNames } from \"../../libs/components\";\n\nconst H2: React.FC<HTMLProps<HTMLHeadingElement>> = ({\n  className = \"\",\n  children,\n  ...otherProps\n}) => {\n  return (\n    <h2\n      className={mergeClassNames(\n        \"font-heading font-bold text-4xl text-black\",\n        className\n      )}\n      {...otherProps}\n    >\n      {children}\n    </h2>\n  );\n};\n\nexport default H2;\n","import React, { HTMLProps } from \"react\";\nimport { mergeClassNames } from \"../../libs/components\";\n\nconst H3: React.FC<HTMLProps<HTMLHeadingElement>> = ({\n  className = \"\",\n  children,\n  ...otherProps\n}) => {\n  return (\n    <h3\n      className={mergeClassNames(\n        \"font-heading font-bold text-3xl text-black\",\n        className\n      )}\n      {...otherProps}\n    >\n      {children}\n    </h3>\n  );\n};\n\nexport default H3;\n","import React, { HTMLProps } from \"react\";\nimport { mergeClassNames } from \"../../libs/components\";\n\nconst H4: React.FC<HTMLProps<HTMLHeadingElement>> = ({\n  className = \"\",\n  children,\n  ...otherProps\n}) => {\n  return (\n    <h4\n      className={mergeClassNames(\n        \"font-heading font-bold text-2xl text-black\",\n        className\n      )}\n      {...otherProps}\n    >\n      {children}\n    </h4>\n  );\n};\n\nexport default H4;\n","import React, { ComponentProps } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { mergeClassNames } from \"../../libs/components\";\n\nconst InternalLink: React.FC<ComponentProps<Link>> = ({\n  className = \"\",\n  ...props\n}) => {\n  return (\n    <Link\n      className={mergeClassNames(\n        \"font-bold underline default-transition\",\n        className\n      )}\n      {...props}\n    />\n  );\n};\n\nexport default InternalLink;\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { DateTime } from \"luxon\";\nimport { Transaction, User } from \"../types\";\nimport { loadTrades } from \"../libs/clients/stake\";\nimport { useAsyncState } from \"../libs/hooks/general\";\n\nimport H2 from \"../components/headings/H2\";\nimport H3 from \"../components/headings/H3\";\nimport H4 from \"../components/headings/H4\";\nimport InternalLink from \"../components/links/Internal\";\nimport LoaderIcon from \"../components/icons/Loader\";\nimport ErrorAlert from \"../components/alerts/Error\";\n\nconst TABLE_WIDTH = 1000;\nconst CELL_WIDTH = 150;\n\ninterface BuySellEntry {\n  orderId: string;\n  unitPrice: number;\n  unitQuantity: number;\n  totalPrice: number;\n  date: string;\n}\n\ninterface LogEntry {\n  instrument: {\n    id: string;\n    symbol: string;\n    name: string;\n  };\n  buys: BuySellEntry[];\n  sells: BuySellEntry[];\n  holdingUnitCount: number;\n  profitRaw: number;\n  profitPercent: number;\n  spent: number;\n  earned: number;\n}\n\ninterface DayLog {\n  symbols: {\n    [symbol: string]: LogEntry;\n  };\n  profitRaw: number;\n  profitPercent: number;\n  spent: number;\n  earned: number;\n  date: string;\n}\n\ntype DayLogs = Array<DayLog | null>;\n\ninterface WeekLog {\n  date: DateTime;\n  weekOfMonth: number;\n  profitRaw: number;\n  profitPercent: number;\n  spent: number;\n  earned: number;\n  dayLogs: DayLogs;\n}\n\ntype WeekLogs = WeekLog[];\n\ninterface MonthLog {\n  date: DateTime;\n  profitRaw: number;\n  profitPercent: number;\n  spent: number;\n  earned: number;\n  weekLogs: WeekLogs;\n}\n\ntype MonthLogs = MonthLog[];\n\nfunction sortTransactionsAsc(a: Transaction, b: Transaction) {\n  if (a.tranWhen < b.tranWhen) {\n    return -1;\n  } else if (a.tranWhen > b.tranWhen) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n\nfunction sortBuySell(a: BuySellEntry, b: BuySellEntry) {\n  if (a.date < b.date) {\n    return -1;\n  } else if (a.date > b.date) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n\nfunction sortLogEntries(a: LogEntry, b: LogEntry) {\n  const aEarliestBuyDate = a.buys[0].date;\n  const bEarliestBuyDate = b.buys[0].date;\n\n  if (aEarliestBuyDate < bEarliestBuyDate) {\n    return -1;\n  } else if (aEarliestBuyDate > bEarliestBuyDate) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n\nfunction fillDataArrayWithBuys(\n  from: DateTime,\n  data: DayLogs,\n  transactions: Transaction[]\n) {\n  let newData = data.slice();\n\n  transactions.forEach((transaction) => {\n    if (transaction.finTranTypeID === \"SPUR\") {\n      const symbol = transaction.instrument.symbol;\n      const date = DateTime.fromISO(transaction.tranWhen);\n      const dataIndex = Math.floor(date.diff(from).as(\"days\"));\n\n      let dayLog = newData[dataIndex];\n\n      if (!dayLog) {\n        dayLog = {\n          symbols: {},\n          profitRaw: 0,\n          profitPercent: 0,\n          spent: 0,\n          earned: 0,\n          date: date.startOf(\"day\").toISO(),\n        };\n      }\n\n      let symbolEntry = dayLog.symbols[symbol];\n\n      if (!symbolEntry) {\n        symbolEntry = {\n          instrument: transaction.instrument,\n          buys: [],\n          sells: [],\n          holdingUnitCount: 0,\n          profitRaw: 0,\n          profitPercent: 0,\n          spent: 0,\n          earned: 0,\n        };\n      }\n\n      let buyIndex = symbolEntry.buys.findIndex(\n        (candidate) => candidate.orderId === transaction.orderID\n      );\n\n      if (buyIndex >= 0) {\n        // Merge it with the other order.\n        const existingBuy = symbolEntry.buys[buyIndex];\n        symbolEntry.buys[buyIndex] = {\n          ...existingBuy,\n          unitQuantity: existingBuy.unitQuantity + transaction.fillQty,\n          totalPrice: existingBuy.totalPrice + transaction.tranAmount,\n        };\n      } else {\n        symbolEntry.buys = symbolEntry.buys.concat({\n          orderId: transaction.orderID,\n          unitPrice: transaction.fillPx,\n          unitQuantity: transaction.fillQty,\n          totalPrice: transaction.tranAmount,\n          date: transaction.tranWhen,\n        });\n      }\n\n      symbolEntry.holdingUnitCount += transaction.fillQty;\n\n      dayLog.symbols = {\n        ...dayLog.symbols,\n        [symbol]: { ...symbolEntry },\n      };\n      newData[dataIndex] = { ...dayLog };\n    }\n  });\n\n  return newData;\n}\n\nfunction fillDataArrayWithSells(data: DayLogs, transactions: Transaction[]) {\n  let newData = data.slice();\n  let unmatchedTransactions: Transaction[] = [];\n\n  transactions.forEach((transaction) => {\n    if (transaction.finTranTypeID === \"SSAL\") {\n      const symbol = transaction.instrument.symbol;\n      let remainingQuantity = transaction.fillQty;\n      let searchIndex = 0;\n\n      while (remainingQuantity > 0 && searchIndex < newData.length) {\n        const dayLog = newData[searchIndex];\n        const symbolEntry = dayLog ? dayLog.symbols[symbol] : undefined;\n\n        if (symbolEntry && symbolEntry.holdingUnitCount >= 0) {\n          const fillQuantity =\n            symbolEntry.holdingUnitCount >= remainingQuantity\n              ? remainingQuantity\n              : remainingQuantity - symbolEntry.holdingUnitCount;\n          newData[searchIndex] = {\n            ...newData[searchIndex],\n            symbols: {\n              ...newData[searchIndex]!.symbols,\n              [symbol]: {\n                ...symbolEntry,\n                holdingUnitCount: symbolEntry.holdingUnitCount - fillQuantity,\n                sells: symbolEntry.sells.concat({\n                  orderId: transaction.orderID,\n                  unitPrice: transaction.fillPx,\n                  unitQuantity: fillQuantity,\n                  totalPrice: transaction.tranAmount,\n                  date: transaction.tranWhen,\n                }),\n              },\n            },\n          } as DayLog;\n\n          remainingQuantity -= fillQuantity;\n        }\n\n        searchIndex++;\n      }\n\n      if (remainingQuantity > 0) {\n        unmatchedTransactions.push({\n          ...transaction,\n          fillQty: remainingQuantity,\n        });\n      }\n    }\n  });\n\n  return [newData, unmatchedTransactions] as [DayLogs, Transaction[]];\n}\n\nfunction calculateProfits(data: DayLogs) {\n  return data.map((dayLog) => {\n    if (!dayLog) {\n      return null;\n    }\n\n    let dayAmountSpent = 0;\n    let dayAmountEarned = 0;\n    const symbols = Object.keys(dayLog.symbols).reduce<DayLog[\"symbols\"]>(\n      (carry, symbol) => {\n        const logEntry = dayLog.symbols[symbol];\n        let quantitySold = 0;\n\n        logEntry.sells.sort(sortBuySell);\n        logEntry.buys.sort(sortBuySell);\n\n        const symbolAmountEarned = logEntry.sells.reduce((total, sell) => {\n          quantitySold += sell.unitQuantity;\n          return (total += sell.unitQuantity * sell.unitPrice);\n        }, 0);\n        const symbolAmountSpent = logEntry.buys.reduce((total, buy) => {\n          if (quantitySold > 0) {\n            const consumedAmount =\n              buy.unitQuantity > quantitySold ? quantitySold : buy.unitQuantity;\n            quantitySold -= consumedAmount;\n            return (total += consumedAmount * buy.unitPrice);\n          } else {\n            return total;\n          }\n        }, 0);\n        const profitRaw = symbolAmountEarned - symbolAmountSpent;\n        const profitPercent =\n          profitRaw === 0\n            ? 0\n            : (Math.abs(profitRaw) / symbolAmountSpent) *\n              100 *\n              (profitRaw < 0 ? -1 : 1);\n\n        dayAmountSpent += symbolAmountSpent;\n        dayAmountEarned += symbolAmountEarned;\n\n        carry[symbol] = {\n          ...logEntry,\n          profitRaw,\n          profitPercent,\n          spent: symbolAmountSpent,\n          earned: symbolAmountEarned,\n        };\n\n        return carry;\n      },\n      {}\n    );\n\n    const profitRaw = dayAmountEarned - dayAmountSpent;\n    const profitPercent =\n      profitRaw === 0\n        ? 0\n        : (Math.abs(profitRaw) / dayAmountSpent) *\n          100 *\n          (profitRaw < 0 ? -1 : 1);\n\n    return {\n      ...dayLog,\n      symbols,\n      profitRaw,\n      profitPercent,\n      spent: dayAmountSpent,\n      earned: dayAmountEarned,\n    };\n  });\n}\n\nfunction getDisplayProfit(raw: number, percent: number) {\n  const isProfit = raw >= 0;\n  const displayProfitRaw = `${isProfit ? \"+\" : \"-\"}$${Math.abs(raw).toPrecision(\n    3\n  )}`;\n  const displayProfitPercent = `${isProfit ? \"+\" : \"-\"}${Math.abs(\n    percent\n  ).toPrecision(3)}%`;\n\n  return [displayProfitRaw, displayProfitPercent];\n}\n\ninterface JournalPageProps {\n  user: User;\n}\nconst JournalPage: React.FC<JournalPageProps> = ({ user }) => {\n  const cachedData = window.localStorage.getItem(\"journalData\");\n  const { loading, setLoading, error, setError } = useAsyncState();\n  const [initialised, setInitialised] = useState(false);\n  const [data, setData] = useState<DayLogs>(\n    cachedData ? JSON.parse(cachedData) : []\n  );\n  const [showUnmatchedAlert, setShowUnmatchedAlert] = useState(false);\n  const [unmatchedTransactionCount, setUnmatchedTransactionCount] = useState(0);\n  const monthLogs = useMemo(() => {\n    const newMonthLogs = data.reduce<MonthLogs>((carry, dayLog) => {\n      if (!dayLog) {\n        return carry;\n      }\n\n      const dayDate = DateTime.fromISO(dayLog.date);\n      const startOfMonth = dayDate.startOf(\"month\");\n      const startOfWeek = dayDate.startOf(\"week\");\n      let monthLog = carry.find((candidate) =>\n        candidate.date.equals(startOfMonth)\n      );\n\n      if (!monthLog) {\n        monthLog = {\n          date: startOfMonth,\n          profitRaw: 0,\n          profitPercent: 0,\n          spent: 0,\n          earned: 0,\n          weekLogs: [],\n        };\n\n        carry.push(monthLog);\n      }\n\n      let weekLog = monthLog.weekLogs.find((candidate) =>\n        candidate.date.equals(startOfWeek)\n      );\n\n      if (!weekLog) {\n        let weekNumber = 1;\n        let endOfWeek = startOfMonth.endOf(\"week\");\n\n        while (startOfWeek > endOfWeek) {\n          weekNumber++;\n          endOfWeek = endOfWeek.plus({ week: 1 });\n        }\n\n        weekLog = {\n          date: startOfWeek,\n          weekOfMonth: weekNumber,\n          profitRaw: 0,\n          profitPercent: 0,\n          spent: 0,\n          earned: 0,\n          dayLogs: [],\n        };\n\n        monthLog.weekLogs.push(weekLog);\n      }\n\n      monthLog.spent += dayLog.spent;\n      monthLog.earned += dayLog.earned;\n      monthLog.profitRaw = monthLog.earned - monthLog.spent;\n      monthLog.profitPercent =\n        monthLog.profitRaw === 0\n          ? 0\n          : (Math.abs(monthLog.profitRaw) / monthLog.spent) *\n            100 *\n            (monthLog.profitRaw < 0 ? -1 : 1);\n\n      weekLog.spent += dayLog.spent;\n      weekLog.earned += dayLog.earned;\n      weekLog.profitRaw = weekLog.earned - weekLog.spent;\n      weekLog.profitPercent =\n        weekLog.profitRaw === 0\n          ? 0\n          : (Math.abs(weekLog.profitRaw) / weekLog.spent) *\n            100 *\n            (weekLog.profitRaw < 0 ? -1 : 1);\n\n      weekLog.dayLogs.push(dayLog);\n\n      return carry;\n    }, []);\n\n    newMonthLogs.forEach((monthLog) => {\n      monthLog.weekLogs.forEach((weekLog) => {\n        weekLog.dayLogs.reverse();\n      });\n\n      monthLog.weekLogs.reverse();\n    });\n    newMonthLogs.reverse();\n\n    return newMonthLogs;\n  }, [data]);\n\n  useEffect(() => {\n    const startFetchingTrades = async () => {\n      const lastFetchDate = window.localStorage.getItem(\"journalLastFetchDate\");\n      const from = lastFetchDate\n        ? DateTime.fromISO(lastFetchDate)\n        : DateTime.local().startOf(\"year\");\n      const to = DateTime.local();\n      const limit = 100;\n      let offset = 0;\n      let fetching = true;\n      let newData = data.slice();\n      let unmatchedTransactions: Transaction[] = [];\n      let buyTransactions: Transaction[] = [];\n      let sellTransactions: Transaction[] = [];\n      setLoading(true);\n\n      try {\n        do {\n          const transactions = await loadTrades(\n            user,\n            from,\n            to,\n            limit,\n            offset,\n            true\n          );\n          offset += limit;\n\n          buyTransactions = buyTransactions.concat(\n            transactions.filter(\n              (transaction) => transaction.finTranTypeID === \"SPUR\"\n            )\n          );\n          sellTransactions = sellTransactions.concat(\n            transactions.filter(\n              (transaction) => transaction.finTranTypeID === \"SSAL\"\n            )\n          );\n\n          if (transactions.length < limit) {\n            fetching = false;\n          }\n        } while (fetching);\n      } catch (e) {\n        setError({\n          title: \"Fetching trades failed\",\n          message: e.message,\n        });\n      }\n\n      buyTransactions.sort(sortTransactionsAsc);\n      sellTransactions.sort(sortTransactionsAsc);\n\n      newData = fillDataArrayWithBuys(from, newData, buyTransactions);\n      [newData, unmatchedTransactions] = fillDataArrayWithSells(\n        newData,\n        sellTransactions\n      );\n      newData = calculateProfits(newData);\n\n      window.localStorage.setItem(\"journalData\", JSON.stringify(newData));\n      window.localStorage.setItem(\"journalLastFetchDate\", to.toISO());\n\n      setData(newData);\n      setUnmatchedTransactionCount(unmatchedTransactions.length);\n      setShowUnmatchedAlert(unmatchedTransactions.length > 0);\n      setLoading(false);\n    };\n\n    if (!initialised) {\n      setInitialised(true);\n      startFetchingTrades();\n    }\n  }, [initialised, data]);\n\n  return (\n    <div className=\"w-full\">\n      <header className=\"px-4 py-2 w-full flex items-center\">\n        <H2>{`${user.firstName}'s trade journal`}</H2>\n        <LoaderIcon className=\"ml-2\" />\n        <InternalLink className=\"ml-auto\" to=\"/logout\">\n          Log out\n        </InternalLink>\n      </header>\n      <main className=\"mt-8 p-4 flex flex-col items-center\">\n        <div style={{ width: 400 }}>{error()}</div>\n        {showUnmatchedAlert && (\n          <div style={{ width: 400 }}>\n            <ErrorAlert\n              message={`Found ${unmatchedTransactionCount} unmatched sell transactions`}\n              dismissable={true}\n              onDismiss={() => setShowUnmatchedAlert(false)}\n            />\n          </div>\n        )}\n        <div style={{ width: TABLE_WIDTH }}>\n          {monthLogs.map((monthLog) => {\n            const monthProfitRaw = monthLog.profitRaw;\n            const isMonthProfit = monthProfitRaw >= 0;\n            const [displayRaw, displayPercent] = getDisplayProfit(\n              monthProfitRaw,\n              monthLog.profitPercent\n            );\n            const hasMonthEarnings = monthLog.earned !== 0;\n\n            return (\n              <div key={monthLog.date.toISO()}>\n                <div className=\"flex items-center\">\n                  <H2>{monthLog.date.toFormat(\"MMMM yyyy\")}</H2>\n                  {hasMonthEarnings && (\n                    <span\n                      className={`ml-auto text-2xl text-center ${\n                        isMonthProfit ? \"text-green-500\" : \"text-red-500\"\n                      }`}\n                      style={{ width: CELL_WIDTH }}\n                    >\n                      {displayRaw}\n                    </span>\n                  )}\n                  {hasMonthEarnings && (\n                    <span\n                      className={`text-2xl text-center ${\n                        isMonthProfit ? \"text-green-500\" : \"text-red-500\"\n                      }`}\n                      style={{ width: CELL_WIDTH }}\n                    >\n                      {displayPercent}\n                    </span>\n                  )}\n                </div>\n                {monthLog.weekLogs.map((weekLog, weekIndex) => {\n                  const weekProfitRaw = weekLog.profitRaw;\n                  const isWeekProfit = weekProfitRaw >= 0;\n                  const [displayRaw, displayPercent] = getDisplayProfit(\n                    weekProfitRaw,\n                    weekLog.profitPercent\n                  );\n                  const hasWeekEarnings = weekLog.earned !== 0;\n\n                  return (\n                    <div\n                      key={weekLog.date.toISO()}\n                      className={`${weekIndex === 0 ? \"mt-4\" : \"mt-16\"}`}\n                    >\n                      <div className=\"flex items-center\">\n                        <H3>{`Week ${weekLog.weekOfMonth}`}</H3>\n                        {hasWeekEarnings && (\n                          <span\n                            className={`ml-auto text-xl text-center ${\n                              isWeekProfit ? \"text-green-500\" : \"text-red-500\"\n                            }`}\n                            style={{ width: CELL_WIDTH }}\n                          >\n                            {displayRaw}\n                          </span>\n                        )}\n                        {hasWeekEarnings && (\n                          <span\n                            className={`text-xl text-center ${\n                              isWeekProfit ? \"text-green-500\" : \"text-red-500\"\n                            }`}\n                            style={{ width: CELL_WIDTH }}\n                          >\n                            {displayPercent}\n                          </span>\n                        )}\n                      </div>\n                      {weekLog.dayLogs.map((dayLog) => {\n                        if (!dayLog) {\n                          return null;\n                        }\n\n                        const dayDate = DateTime.fromISO(dayLog.date);\n                        const dayProfitRaw = dayLog.profitRaw;\n                        const isProfit = dayProfitRaw >= 0;\n                        const [displayRaw, displayPercent] = getDisplayProfit(\n                          dayProfitRaw,\n                          dayLog.profitPercent\n                        );\n                        const hasDayEarnings = dayLog.earned !== 0;\n                        const symbolEntries = Object.values(dayLog.symbols);\n                        symbolEntries.sort(sortLogEntries);\n\n                        return (\n                          <div\n                            key={dayLog.date}\n                            className=\"mt-4 p-2 border border-gray-100 shadow rounded-lg\"\n                          >\n                            <div className=\"flex items-center\">\n                              <H4>{dayDate.toFormat(\"EEEE\")}</H4>\n                              <span className=\"ml-auto text-gray-300\">\n                                {dayDate.toFormat(\"dd/MM\")}\n                              </span>\n                            </div>\n                            <div className=\"my-3 flex items-center\">\n                              <div\n                                className=\"text-center text-gray-300\"\n                                style={{ width: CELL_WIDTH }}\n                              >\n                                Code\n                              </div>\n                              <div\n                                className=\"text-center text-gray-300\"\n                                style={{ width: CELL_WIDTH }}\n                              >\n                                Buy\n                              </div>\n                              <div\n                                className=\"text-center text-gray-300\"\n                                style={{ width: CELL_WIDTH }}\n                              >\n                                Sell\n                              </div>\n                              <div\n                                className=\"text-center text-gray-300\"\n                                style={{ width: CELL_WIDTH }}\n                              >\n                                Holding\n                              </div>\n                              <div\n                                className=\"ml-auto text-center text-gray-300\"\n                                style={{ width: CELL_WIDTH }}\n                              >\n                                Return ($)\n                              </div>\n                              <div\n                                className=\"text-center text-gray-300\"\n                                style={{ width: CELL_WIDTH }}\n                              >\n                                Return (%)\n                              </div>\n                            </div>\n                            {symbolEntries.map((logEntry) => {\n                              const hasHoldings = logEntry.holdingUnitCount > 0;\n                              const hasSold = logEntry.sells.length > 0;\n                              const symbolProfitRaw = logEntry.profitRaw;\n                              const isProfit = symbolProfitRaw >= 0;\n                              const [\n                                displayRaw,\n                                displayPercent,\n                              ] = getDisplayProfit(\n                                symbolProfitRaw,\n                                logEntry.profitPercent\n                              );\n\n                              return (\n                                <div\n                                  key={logEntry.instrument.symbol}\n                                  className=\"my-3 flex items-center\"\n                                >\n                                  <div\n                                    className=\"text-center\"\n                                    style={{ width: CELL_WIDTH }}\n                                  >\n                                    {logEntry.instrument.symbol}\n                                  </div>\n                                  <div\n                                    className=\"flex flex-col\"\n                                    style={{ width: CELL_WIDTH }}\n                                  >\n                                    {logEntry.buys.map((buy, index) => {\n                                      return (\n                                        <div\n                                          key={index}\n                                          className=\"text-center\"\n                                        >\n                                          {`${\n                                            buy.unitQuantity\n                                          } @ $${buy.unitPrice.toPrecision(4)}`}\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                  <div\n                                    className=\"flex flex-col\"\n                                    style={{ width: CELL_WIDTH }}\n                                  >\n                                    {logEntry.sells.map((sell, index) => {\n                                      return (\n                                        <div\n                                          key={index}\n                                          className=\"text-center\"\n                                        >\n                                          {`${\n                                            sell.unitQuantity\n                                          } @ $${sell.unitPrice.toPrecision(\n                                            4\n                                          )}`}\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                  <div\n                                    className=\"text-center text-yellow-500\"\n                                    style={{ width: CELL_WIDTH }}\n                                  >\n                                    {hasHoldings\n                                      ? `${logEntry.holdingUnitCount}`\n                                      : \"\"}\n                                  </div>\n                                  {hasSold && (\n                                    <div\n                                      className={`ml-auto text-center ${\n                                        isProfit\n                                          ? \"text-green-500\"\n                                          : \"text-red-500\"\n                                      }`}\n                                      style={{ width: CELL_WIDTH }}\n                                    >\n                                      {displayRaw}\n                                    </div>\n                                  )}\n                                  {hasSold && (\n                                    <div\n                                      className={`text-center ${\n                                        isProfit\n                                          ? \"text-green-500\"\n                                          : \"text-red-500\"\n                                      }`}\n                                      style={{ width: CELL_WIDTH }}\n                                    >\n                                      {displayPercent}\n                                    </div>\n                                  )}\n                                </div>\n                              );\n                            })}\n                            {hasDayEarnings && (\n                              <div className=\"py-3 flex items-center border-t border-gray-200\">\n                                <span\n                                  className={`ml-auto text-lg text-center ${\n                                    isProfit ? \"text-green-500\" : \"text-red-500\"\n                                  }`}\n                                  style={{ width: CELL_WIDTH }}\n                                >\n                                  {displayRaw}\n                                </span>\n                                <span\n                                  className={`text-lg text-center ${\n                                    isProfit ? \"text-green-500\" : \"text-red-500\"\n                                  }`}\n                                  style={{ width: CELL_WIDTH }}\n                                >\n                                  {displayPercent}\n                                </span>\n                              </div>\n                            )}\n                          </div>\n                        );\n                      })}\n                    </div>\n                  );\n                })}\n              </div>\n            );\n          })}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default JournalPage;\n","import React from \"react\";\nimport {\n  withRouter,\n  Route,\n  Switch,\n  useLocation,\n  Redirect,\n} from \"react-router-dom\";\nimport { useCurrentUser } from \"../libs/hooks/user\";\n\nimport LoginPage from \"../pages/Login\";\nimport LogoutPage from \"../pages/Logout\";\nimport JournalPage from \"../pages/Journal\";\n\nconst App: React.FC = () => {\n  const location = useLocation();\n  const user = useCurrentUser();\n  const unauthenticatedRoutes = [\n    <Route key={\"/login\"} path=\"/login\" exact component={LoginPage} />,\n    <Redirect key={\"redirect/login\"} to=\"/login\" />,\n  ];\n  const authenticatedRoutes = [\n    <Route key={\"/journal\"} path=\"/journal\" exact>\n      <JournalPage user={user!} />\n    </Route>,\n    <Route key={\"/logout\"} path=\"/logout\" exact>\n      <LogoutPage user={user!} />\n    </Route>,\n    <Redirect key={\"redirect/journal\"} to=\"/journal\" />,\n  ];\n\n  return (\n    <Switch location={location}>\n      {user ? authenticatedRoutes : unauthenticatedRoutes}\n    </Switch>\n  );\n};\n\nexport default withRouter(App);\n","import { User } from \"../../types\";\n\nexport const useCurrentUser = () => {\n  const userJson = window.localStorage.getItem(\"user\");\n\n  if (userJson) {\n    return JSON.parse(userJson) as User;\n  } else {\n    return null;\n  }\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./containers/App\";\n\nReactDOM.render(\n  <HashRouter>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </HashRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}